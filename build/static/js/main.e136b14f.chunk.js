(this.webpackJsonpclone_twitter=this.webpackJsonpclone_twitter||[]).push([[0],{53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(8),a=n.n(c),r=n(40),s=n.n(r),i=n(11),u=n(29),o=n(12),j=n(0),b=n.n(j),l=n(2),O=n(41),d=n(21),f=n(16),p=n(24),h=Object(O.a)({apiKey:"AIzaSyBMpLyLMT-ReGnfIiyj5v-GpfOFUTpbP0w",authDomain:"clone-twitter-bbc65.firebaseapp.com",projectId:"clone-twitter-bbc65",storageBucket:"clone-twitter-bbc65.appspot.com",messagingSenderId:"885952810054",appId:"1:885952810054:web:a9644a9696e58f10ab4e47"}),m=Object(d.d)(),x=Object(f.f)(),v=(Object(p.c)(h),h),g=n(6),w=function(e){var t=e.userObj,n=e.refreshUser,a=Object(o.f)(),r=Object(c.useState)(!1),s=Object(i.a)(r,2),u=s[0],j=s[1],O=Object(c.useState)(t.displayName),p=Object(i.a)(O,2),h=p[0],v=p[1],w=function(){var e=Object(l.a)(b.a.mark((function e(){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.b)(x,"tweets"),c=Object(f.i)(n,Object(f.k)("userid","==",t.uid)),e.next=4,Object(f.e)(c);case 4:e.sent.forEach((function(e){console.log(e.id," => ",e.data())}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(l.a)(b.a.mark((function e(c){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),t.displayName===h){e.next=5;break}return e.next=4,Object(d.h)(m.currentUser,{displayName:h});case 4:n();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){w()}),[]),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("button",{onClick:function(){m.signOut(),a("/")},children:"Log out"}),Object(g.jsx)("button",{onClick:function(){j((function(e){return!e}))},children:"Edit profile"}),u?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:y,children:[Object(g.jsx)("input",{placeholder:"write your name",value:h,onChange:function(e){var t=e.target.value;v(t)}}),Object(g.jsx)("button",{children:"submit"})]})}):Object(g.jsx)(g.Fragment,{})]})},y=n(32),k=n(28),N=function(){var e=Object(c.useState)(),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(),s=Object(i.a)(r,2),u=s[0],o=s[1],j=Object(c.useState)(!0),O=Object(i.a)(j,2),f=O[0],p=O[1],h=Object(c.useState)(),x=Object(i.a)(h,2),v=x[0],w=x[1],N=function(e){var t=e.target,n=t.name,c=t.value;"email"===n?o(c):"password"===n&&a(c)},S=function(){var e=Object(l.a)(b.a.mark((function e(t){var c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=9;break}return console.log(u,n),e.next=6,Object(d.c)(m,u,n);case 6:c=e.sent,e.next=12;break;case 9:return e.next=11,Object(d.f)(m,u,n);case 11:c=e.sent;case 12:console.log(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),w(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"submit_container",children:[Object(g.jsx)(y.a,{icon:k.c,className:"twitter_icon"}),Object(g.jsxs)("form",{onSubmit:S,className:"submit_form",children:[Object(g.jsx)("input",{placeholder:"email",type:"email",value:u,required:!0,onChange:N,name:"email",className:"email_form"}),Object(g.jsx)("input",{placeholder:"password",type:"password",value:n,required:!0,onChange:N,name:"password",className:"password_form"}),Object(g.jsx)("input",{type:"submit",value:f?"create":"login",className:"auth_submit_button"}),Object(g.jsx)("span",{children:v})]}),Object(g.jsx)("span",{onClick:function(){p((function(e){return!e}))},children:f?"you don't have account? click me and make account":"you already have account? click me and log in"})]})},S=function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(t){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(n=t.target.name)?c=new d.b:"github"===n&&(c=new d.a),e.next=4,Object(d.g)(m,c);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{className:"auth_container",children:[Object(g.jsx)(N,{}),Object(g.jsxs)("div",{className:"auth_btns",children:[Object(g.jsxs)("button",{name:"google",onClick:e,className:"google_btn",children:[Object(g.jsx)(y.a,{icon:k.b,className:"google_icon"}),"continue with google"]}),Object(g.jsxs)("button",{name:"github",onClick:e,className:"github_btn",children:[Object(g.jsx)(y.a,{icon:k.a,className:"github_icon"}),"continue with github"]})]})]})},C=n(42),_=function(e){var t=e.tweetsObj,n=e.isOwner,a=Object(c.useState)(!1),r=Object(i.a)(a,2),s=r[0],u=r[1],o=Object(c.useState)(t.text),j=Object(i.a)(o,2),O=j[0],d=j[1],h=function(){var e=Object(l.a)(b.a.mark((function e(n){var c,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("you sure delte tweet?")){e.next=10;break}return c=Object(f.d)(x,"tweets","".concat(t.id)),e.next=5,Object(f.c)(c);case 5:if(a=Object(p.c)(),""===t.attachmentUrl){e.next=10;break}return r=Object(p.d)(a,t.attachmentUrl),e.next=10,Object(p.a)(r);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(e){e.preventDefault()},v=function(){u((function(e){return!e}))},w=function(){var e=Object(l.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(f.d)(x,"tweets",t.id),e.next=3,Object(f.j)(n,{text:O});case 3:v();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsxs)("div",{children:[Object(g.jsx)("h4",{children:t.text}),""!==t.attachmentUrl&&Object(g.jsx)("img",{src:t.attachmentUrl,width:50,height:50}),n&&(s?Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:m,children:[Object(g.jsx)("input",{type:"text",value:O,required:!0,onChange:function(e){var t=e.target.value;d(t)}}),Object(g.jsx)("button",{onClick:w,children:"change"}),Object(g.jsx)("button",{onClick:v,children:"cancle"})]})}):Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:m,children:[Object(g.jsx)("button",{onClick:h,children:"delete"}),Object(g.jsx)("button",{onClick:v,children:"edit"})]})}))]})},U=n(56),F=function(e){var t=e.userObj,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],s=a[1],u=Object(c.useState)(""),o=Object(i.a)(u,2),j=o[0],O=o[1],d=Object(c.useRef)(),h=function(){var e=Object(l.a)(b.a.mark((function e(n){var c,a,i,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),c="",""===j){e.next=12;break}return a=Object(p.c)(),i=Object(p.d)(a,"".concat(t.uid,"/").concat(Object(U.a)())),e.next=7,Object(p.e)(i,j,"data_url");case 7:return u=e.sent,console.log(u),e.next=11,Object(p.b)(u.ref);case 11:c=e.sent;case 12:return e.prev=12,e.next=15,Object(f.a)(Object(f.b)(x,"tweets"),{text:r,createdAt:Date.now(),userid:t.uid,attachmentUrl:c});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(12),console.log(e.t0);case 20:s(""),m();case 22:case"end":return e.stop()}}),e,null,[[12,17]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){O(null),d.current.value=""};return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)("form",{onSubmit:h,children:[Object(g.jsx)("input",{value:r,onChange:function(e){var t=e.target.value;s(t)},placeholder:"write your tweet",type:"text"}),Object(g.jsx)("input",{type:"file",accept:"image/*",onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onloadend=function(e){var t=e.currentTarget.result;O(t)},n.readAsDataURL(t)},placeholder:"choose file",ref:d}),j&&Object(g.jsxs)("div",{children:[Object(g.jsx)("img",{src:j,height:50,width:50}),Object(g.jsx)("button",{onClick:m,children:"clear"})]}),Object(g.jsx)("input",{type:"submit",value:"tweet"})]})})},I=function(e){var t=e.userObj,n=Object(c.useState)([]),a=Object(i.a)(n,2),r=a[0],s=a[1];Object(c.useEffect)((function(){var e=Object(f.i)(Object(f.b)(x,"tweets"),Object(f.h)("createdAt"));Object(f.g)(e,(function(e){var t=e.docs.map((function(e){return Object(C.a)({id:e.id},e.data())}));s(t)}))}),[]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{children:"Home"}),Object(g.jsx)("button",{onClick:function(){m.signOut()},children:"Log out"}),Object(g.jsx)(F,{userObj:t}),Object(g.jsx)("div",{children:r.map((function(e){return Object(g.jsx)(_,{id:e.id,tweetsObj:e,isOwner:e.userid===t.uid})}))})]})},D=function(e){var t=e.userObj;return Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{children:[Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/",children:"Home"})}),Object(g.jsx)("li",{children:Object(g.jsx)(u.b,{to:"/profile",children:t.displayName?"".concat(t.displayName,"'s profile"):"make your name"})})]})})},L=function(e){var t=e.isLoggedIn,n=e.userObj,c=e.refreshUser;return Object(g.jsxs)(u.a,{children:[t&&Object(g.jsx)(D,{userObj:n}),Object(g.jsx)(o.c,{children:t?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(o.a,{path:"/",element:Object(g.jsx)(I,{userObj:n})}),Object(g.jsx)(o.a,{path:"/profile",element:Object(g.jsx)(w,{userObj:n,refreshUser:c})})]}):Object(g.jsx)(o.a,{path:"/",element:Object(g.jsx)(S,{})})})]})};var E=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(i.a)(r,2),u=s[0],o=s[1],j=Object(c.useState)(null),b=Object(i.a)(j,2),l=b[0],O=b[1];return Object(c.useEffect)((function(){Object(d.e)(m,(function(e){e?(O({displayName:e.displayName,email:e.email,uid:e.uid,updateProfile:function(t){Object(d.h)(m.currentUser,{displayName:e.displayName})}}),o(!0)):(o(!1),O(null)),a(!0)}))}),[]),Object(g.jsxs)("div",{children:[console.log(u),n?Object(g.jsx)(L,{isLoggedIn:u,userObj:l,refreshUser:function(){var e=m.currentUser;O({displayName:e.displayName,email:e.email,uid:e.uid,updateProfile:function(t){Object(d.h)(m.currentUser,{displayName:e.displayName})}})}}):"initalizing..."]})};n(53);console.log(v),s.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(E,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.e136b14f.chunk.js.map